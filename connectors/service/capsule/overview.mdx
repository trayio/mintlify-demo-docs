---
title: "Overview"
description: "Overview of the Capsule connector"
---

# Overview

## Overview

Capsule is a Customer Relationship Management Tool (CRM) that allows you to work independently or collaboratively in order to form meaningful relationships with your contacts. Capsule isn't limited to contact management though, instead it brings all of your daily activities into one place, from helping you to organize your calendar, keeping on top of sales deals, and managing your projects.

## Authentication

Within the workflow builder, highlight the Capsule connector.

In the Capsule connector properties panel to the right of the builder, click on the Authenticate tab and the 'New authentication' button.

This will result in a Tray.io authentication pop-up modal. The first page will ask you to name your authentication and select the type of authentication you wish to create ('Personal' or 'Organisational').

The next page will ask you to select the authentication method and service permissions you want to activate. If you select the **Token** authentication method then you'll need to provide the token acquired from the capsule dashboard.

Alternatively if the authentication method is **Oauth2** , select the appropriate permissions based on your requirements:

- **Read:** if you will only be performing 'get' operations (IE those operations with 'get' or list' in the name, such as 'list opportunities').
- **Write:** if you will only be performing 'post', 'put' and/or 'delete' operations (i.e., those operations with 'create', 'update' or 'delete' in the title, such as 'create opportunity').
- **Both:** read and write both if you want to perform both 'get' and 'post'/'put'/'delete' operations.

Next, click on the 'Create authentication' button.

You will now be directed to a separate pop-up where you will be asked to enter your 'site address'. This is the address that appears in your browser's address bar after logging in to your capsule account and visiting the Capsule homepage. Enter the address and click 'continue'.

The next page will ask you to allow Tray.io access to your Capsule account. Click 'Allow'.

Next you will be asked to enter your username and password. This is the same username and the same password that you use to log into your Capsule account on the Capsule website. Enter your username and password then click 'Log In'.

Go back to your settings authentication field (within the workflow builder properties panel), and select the recently added authentication from the dropdown options now available.

Your connector authentication setup should now be complete.

## Available Operations

The examples below show one or two of the available connector operations in use.

Please see the [Full Operations Reference](#operationsFull) at the end of this page for details on all available operations for this connector.

## Using the Raw HTTP Request ('Universal Operation')

As of **version 1.0**, you can effectively create your own operations.

This is a powerful feature that you can use when there is an endpoint in Capsule that is not used by any of our operations.

To use this you will first of all need to research the endpoint in the [Capsule API documentation v2.0](https://developer.capsulecrm.com/), to **find the exact format** that Capsule will be expecting the endpoint to be passed in.

Note that you will only need to add the suffix to the endpoint, as the base URL will be automatically set (the base URL is picked up from the value you entered when you created your authentication).

The base URL for Capsule is: `https://api.capsulecrm.com/api/v2`

For example, say that the 'List opportunities' operation did not exist in our Capsule connector, and you wanted to use this endpoint. You would use the Capsule API docs to find the relevant endpoint - which in this case is a `GET` request called: `/opportunities`.

More details about this endpoint can be found [here](https://developer.capsulecrm.com/v2/operations/Opportunity).

As you can see, there is also the option to include a query parameter, should you wish to do so. So if you know what your method, endpoint, and details of your query parameters are, you can list opportunities with the following settings:

Method: `GET`

Endpoint: `opportunities`

Query Parameter:

- Key: `page` Value: `1`
- Key: `perPage` Value: `50`

Final outcome being: **<Content type link TBD>**

## Example Usage

Below is an example of a way in which you could potentially use the Capsule connector, to list all the parties associated with the Capsule account and then loop through that list, retrieving the details of all parties on the list.

The steps will be as follows:

1. Setup using a manual trigger and list parties operation.
2. Loop through the list of parties.
3. Retrieve the details of each party.

Your completed workflow should look similar to this:

### 1 - Setup Trigger & List Parties

With your trigger in place (be it [Manual](/connectors/triggers/manual-trigger/), [Scheduled](/connectors/triggers/scheduled-trigger/), [Callable](/connectors/triggers/callable-trigger/) etc) add a Capsule connector. Set the operation to 'List parties.'

As you can see, the 'page' and 'per page' fields are required. Enter your chosen values for these fields.

Feel free to re-name your steps as you go along to make things clearer for yourself and other users. The operation names themselves often suffice.

Upon completing this first step, a list of parties associated with your Capsule account will be retrieved.

### 2 - Loop Through the List of Parties

Next, search for the Loop connector within your connector panel, and drag it into your workflow as your next step. Set your operation to 'Loop condition'.

The Loop connector allows you to iterate through a list of results. In this example, we will use it to iterate through the data found within the previous Capsule connector step.

In order to specify the list you want to loop through, start by using the list mapping icon (found next to the list input field, within the properties panel) to generate the connector-snake.

While hovering over the 'List parties' step (with the tail end of the connector-snake), select `parties` from the list of output properties displayed. This will auto-populate a jsonpath within your list input field, and update the type selector to jsonpath.

For more clarification on the pathways you have available, open the Debug panel to view your step's Input and Output.

Once this step has been completed, you will be able to loop through the list of parties you retrieved in step 1.

### 3 - Get Party

The last step is to drag a Capsule connector **inside** the Loop connector step itself. Set the operation to 'Get party'. As you can see, the 'Party ID' field is required. This can be obtained by using the connector snake once again to hover over the 'Loop' step and selecting `value.id` from the list of output properties displayed.

With this last step completed, you will have successfully retrieved the details of every party associated with your Capsule account.

You can always inspect the [logs of your workflow](/platform/troubleshooting/logs-and-debugging/) by using the ‘Debug’ tab available on the top of the Tray builder.

If you go through each execution of the 'Get party' step, you will see the results of each loop.
